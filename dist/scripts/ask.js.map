{"version":3,"sources":["../../src/scripts/ask.ts"],"names":[],"mappings":";;;;;AAWA,eAAe,IAAA,GAAO;AACpB,EAAA,MAAM,IAAA,GAAO,OAAA,CAAQ,IAAA,CAAK,KAAA,CAAM,CAAC,CAAA;AACjC,EAAA,MAAM,QAAA,GAAW,IAAA,CAAK,IAAA,CAAK,GAAG,CAAA;AAE9B,EAAA,IAAI,CAAC,QAAA,EAAU;AACb,IAAA,OAAA,CAAQ,MAAM,0BAA0B,CAAA;AACxC,IAAA,OAAA,CAAQ,KAAK,CAAC,CAAA;AAAA,EAChB;AAGA,EAAA,MAAM,UAAA,GAAa,OAAA,CAAQ,GAAA,CAAI,kBAAA,IAAsB,QAAQ,GAAA,EAAI;AACjE,EAAA,MAAM,UAAA,GAAa,OAAA,CAAQ,UAAA,EAAY,kBAAkB,CAAA;AAGzD,EAAA,IAAI,CAAC,UAAA,CAAW,UAAU,CAAA,EAAG;AAC3B,IAAA,OAAA,CAAQ,GAAA,CAAI,iDAAiD,UAAU,CAAA;AACvE,IAAA,MAAM,SAAA,GAAY,QAAQ,UAAU,CAAA;AACpC,IAAA,SAAA,CAAU,SAAA,EAAW,EAAE,SAAA,EAAW,IAAA,EAAM,CAAA;AACxC,IAAA,MAAM,MAAA,CAAO,YAAY,OAAO,CAAA;AAChC,IAAA,OAAA,CAAQ,IAAI,4DAAuD,CAAA;AACnE,IAAA,OAAA,CAAQ,KAAK,CAAC,CAAA;AAAA,EAChB;AAEA,EAAA,IAAI;AACF,IAAA,MAAM,MAAA,GAAS,MAAM,GAAA,CAAI,OAAA,EAAS,UAAU,CAAA;AAC5C,IAAA,MAAM,MAAA,GAAS,MAAM,MAAA,CAAO,GAAA,CAAI,UAAU,EAAE,CAAA,EAAG,GAAG,CAAA;AAElD,IAAA,IAAI,OAAO,MAAA,EAAQ;AACjB,MAAA,OAAA,CAAQ,GAAA,CAAI,SAAA,EAAW,MAAA,CAAO,MAAM,CAAA;AAAA,IACtC,CAAA,MAAO;AAEL,MAAA,MAAM,aAAA,GAAgB,MAAM,MAAA,CAAO,IAAA,CAAK,UAAU,EAAE,CAAA,EAAG,GAAG,CAAA;AAE1D,MAAA,IAAI,CAAC,aAAA,CAAc,MAAA,IAAU,aAAA,CAAc,MAAA,CAAO,WAAW,CAAA,EAAG;AAC9D,QAAA,OAAA,CAAQ,IAAI,+CAA+C,CAAA;AAC3D,QAAA,OAAA,CAAQ,KAAK,CAAC,CAAA;AAAA,MAChB;AAEA,MAAA,OAAA,CAAQ,IAAI,sBAAsB,CAAA;AAClC,MAAA,KAAA,MAAW,KAAA,IAAS,cAAc,MAAA,EAAQ;AACxC,QAAA,MAAM,KAAA,GAAQ,MAAM,KAAA,IAAS,UAAA;AAC7B,QAAA,MAAM,OAAA,GAAA,CAAW,KAAA,CAAM,IAAA,IAAQ,EAAA,EAAI,KAAA,CAAM,GAAG,GAAG,CAAA,CAAE,OAAA,CAAQ,KAAA,EAAO,GAAG,CAAA;AACnE,QAAA,OAAA,CAAQ,GAAA,CAAI,CAAA,OAAA,EAAK,KAAK,CAAA,CAAE,CAAA;AACxB,QAAA,OAAA,CAAQ,GAAA,CAAI,KAAK,OAAO,CAAA,EAAG,QAAQ,MAAA,IAAU,GAAA,GAAM,QAAQ,EAAE;AAAA,CAAI,CAAA;AAAA,MACnE;AAAA,IACF;AAAA,EACF,SAAS,KAAA,EAAO;AACd,IAAA,OAAA,CAAQ,KAAA,CAAM,UAAU,KAAK,CAAA;AAC7B,IAAA,OAAA,CAAQ,KAAK,CAAC,CAAA;AAAA,EAChB;AACF;AAEA,IAAA,EAAK","file":"ask.js","sourcesContent":["#!/usr/bin/env node\n/**\n * Memvid Mind - Ask Script\n *\n * Ask questions about memories using the SDK (no CLI dependency)\n */\n\nimport { use, create } from \"@memvid/sdk\";\nimport { existsSync, mkdirSync } from \"node:fs\";\nimport { resolve, dirname } from \"node:path\";\n\nasync function main() {\n  const args = process.argv.slice(2);\n  const question = args.join(\" \");\n\n  if (!question) {\n    console.error(\"Usage: ask.js <question>\");\n    process.exit(1);\n  }\n\n  // Get memory file path\n  const projectDir = process.env.CLAUDE_PROJECT_DIR || process.cwd();\n  const memoryPath = resolve(projectDir, \".claude/mind.mv2\");\n\n  // Auto-create if doesn't exist\n  if (!existsSync(memoryPath)) {\n    console.log(\"No memory file found. Creating new memory at:\", memoryPath);\n    const memoryDir = dirname(memoryPath);\n    mkdirSync(memoryDir, { recursive: true });\n    await create(memoryPath, \"basic\");\n    console.log(\"✅ Memory initialized! No memories to ask about yet.\\n\");\n    process.exit(0);\n  }\n\n  try {\n    const memvid = await use(\"basic\", memoryPath);\n    const result = await memvid.ask(question, { k: 5 });\n\n    if (result.answer) {\n      console.log(\"Answer:\", result.answer);\n    } else {\n      // Fall back to search if ask doesn't return answer\n      const searchResults = await memvid.find(question, { k: 5 });\n\n      if (!searchResults.frames || searchResults.frames.length === 0) {\n        console.log(\"No relevant memories found for your question.\");\n        process.exit(0);\n      }\n\n      console.log(\"Relevant memories:\\n\");\n      for (const frame of searchResults.frames) {\n        const title = frame.title || \"Untitled\";\n        const snippet = (frame.text || \"\").slice(0, 300).replace(/\\n/g, \" \");\n        console.log(`• ${title}`);\n        console.log(`  ${snippet}${snippet.length >= 300 ? \"...\" : \"\"}\\n`);\n      }\n    }\n  } catch (error) {\n    console.error(\"Error:\", error);\n    process.exit(1);\n  }\n}\n\nmain();\n"]}